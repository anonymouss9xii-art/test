<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style_scenarios.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="glow-title"> ุณููุงุฑูููุงุช-๐ใป๐๐๐๐๐๐ ๐</h1>
<!-- ุฒุฑ ุงููุถุน ุงููููู ุซุงุจุช ุฃุนูู ูุณุงุฑ -->
<button id="toggle-theme" class="theme-btn" style="position: fixed; top: 20px; left: 20px;">๐ ุงููุถุน ุงููููู</button>

<!-- ุฃุฒุฑุงุฑ ุฃุฎุฑู ุถูู ุงูุญุงููุฉ -->
<div style="margin-top: 60px; display: flex; gap: 10px; align-items: center;">
  <button onclick="stopSpeaking()" class="theme-btn">๐ ุฅููุงู ุงูุตูุช</button>
</div>

        <img src="/static/img/logo.gif" alt="Logo" class="logo">

        {% for s in scenarios %}
<div class="scenario-box">
    <!-- ุฒุฑ ุงูุตูุช ุฎุงุฑุฌ ุงูุจุทุงูุฉ -->
    <div class="scenario-header">
         {{ s.title }}
        <button class="audio-btn" onclick="speakText(`{{ s.description | escape }}`)">๐</button>
    </div>
        
    <div class="scenario-card">
        <div class="card-front">
            <p>๐ฌ{{ s.description }}</p>
        </div>
        <!-- ุฃุฒุฑุงุฑ ุตุญ ูุบูุท -->
           <div class="answer-buttons">
    <button onclick="markAnswer(this, true)">โ๏ธ ุตุญ</button>
    <button onclick="markAnswer(this, false)">โ ุบูุท</button>
</div>

        <div class="card-back">
            <h4>ุงูุฌูุงุจ</h4>
            <p>{{ s.answer }}</p>
        </div>
    </div>
</div>
{% endfor %}
        <a href="/stats" class="retry-btn"> ุตูุญุฉ ุงูุงุญุตุงุฆูุงุช</a>
        <a href="/" class="retry-btn">๐ ุงูุนูุฏุฉ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
    </div>

    <script>
function toggleAnswer(btn) {
    const answerBox = btn.nextElementSibling;
    btn.classList.add('fade-out');
    setTimeout(() => {
        btn.style.display = 'none';
        answerBox.classList.remove('hidden');
        answerBox.classList.add('fade-in');
    }, 300);
}

function revealAnswer(container) {
    const answerBox = container.querySelector('.answer');
    const title = container.querySelector('.answer-title');
    title.style.display = 'none';
    answerBox.classList.remove('hidden');
    answerBox.classList.add('fade-in');
}

function speakText(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'ar-SA';
    speechSynthesis.speak(utterance);
}

// ุชุดุบูู ุงููุถุน ุงููููู ูู localStorage
if (localStorage.getItem("dark-mode") === "true") {
    document.body.classList.add("dark-mode");
}

const toggleBtn = document.getElementById("toggle-theme");
toggleBtn.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");

    // ุญูุธ ุงููุถุน ูู localStorage
    const isDark = document.body.classList.contains("dark-mode");
    localStorage.setItem("dark-mode", isDark);
});

function stopSpeaking() {
    speechSynthesis.cancel();
}

function markAnswer(btn, isTrue) {
    const parent = btn.parentElement;
    const buttons = parent.querySelectorAll('button');
    // ุชุนุทูู ูู ุงูุฃุฒุฑุงุฑ ุจุนุฏ ุงูุถุบุท
    buttons.forEach(b => b.disabled = true);

    // ุชูููู ุงูุฒุฑ ุงููุถุบูุท ููุท
    if (isTrue) {
        btn.classList.add('correct');  // ุฃุฎุถุฑ
    } else {
        btn.classList.add('wrong');    // ุฃุญูุฑ
    }
}

// ๐น ุชุญุฑูู ุงููุฑุช ุนูุฏ ุงูุถุบุท ุจุฏู ูุฑูุฑ ุงููุงูุณ
// ุชุญุฑูู ุงููุฑุช ุนูุฏ ุงูุถุบุท
document.querySelectorAll('.scenario-card').forEach(card => {
    card.addEventListener('click', () => {
        card.classList.toggle('flipped');
    });
});
</script>

</body>
</html>
